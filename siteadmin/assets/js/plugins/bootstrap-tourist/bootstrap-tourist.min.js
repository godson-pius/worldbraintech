!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],(function(o){return t.Tour=e(o)})):"object"==typeof exports?module.exports=e(require("jquery")):t.Tour=e(t.jQuery)}(window,(function(t){const e="#tourBackdrop",o="#tourBackdrop-temp",n="#tourHighlight",i="#tourHighlight-temp",r="#tourPrevent";var s,a,l;return s=window.document,function(){function p(e){var o;try{o=window.localStorage}catch(t){o=!1}if(l={prevButton:"Prev",nextButton:"Next",pauseButton:"Pause",resumeButton:"Resume",endTourButton:"End Tour"},this._options=t.extend(!0,{name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:o,debug:!1,backdrop:!1,backdropContainer:"body",backdropOptions:{highlightOpacity:.9,highlightColor:"#FFF",backdropSibling:!1,animation:{backdropShow:function(t,e){t.fadeIn()},backdropHide:function(t,e){t.fadeOut("slow")},highlightShow:function(t,e){e.fnPositionHighlight(),t.fadeIn()},highlightTransition:"tour-highlight-animation",highlightHide:function(t,e){t.fadeOut("slow")}}},redirect:!0,orphan:!1,showIfUnintendedOrphan:!1,duration:!1,delay:!1,basePath:"",template:null,localization:{buttonTexts:l},framework:"bootstrap3",sanitizeWhitelist:[],sanitizeFunction:null,showProgressBar:!0,showProgressText:!0,getProgressBarHTML:null,getProgressTextHTML:null,afterSetState:function(t,e){},afterGetState:function(t,e){},afterRemoveState:function(t){},onStart:function(t){},onEnd:function(t){},onShow:function(t){},onShown:function(t){},onHide:function(t){},onHidden:function(t){},onNext:function(t){},onPrev:function(t){},onPause:function(t,e){},onResume:function(t,e){},onRedirectError:function(t){},onElementUnavailable:null,onPreviouslyEnded:null,onModalHidden:null},e),0==t(this._options.backdropContainer).length&&(this._options.backdropContainer="body"),"bootstrap3"!==this._options.framework&&"bootstrap4"!==this._options.framework)throw this._debug("Invalid framework specified: "+this._options.framework),"Bootstrap Tourist: Invalid framework specified";if(a={bootstrap3:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; '+this._options.localization.buttonTexts.prevButton+'</button> <button class="btn btn-sm btn-default" data-role="next">'+this._options.localization.buttonTexts.nextButton+' &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="'+this._options.localization.buttonTexts.pauseButton+'" data-resume-text="'+this._options.localization.buttonTexts.resumeButton+'">'+this._options.localization.buttonTexts.pauseButton+'</button> </div> <button class="btn btn-sm btn-default" data-role="end">'+this._options.localization.buttonTexts.endTourButton+"</button> </div> </div>",bootstrap4:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-header"></h3> <div class="popover-body"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-outline-secondary" data-role="prev">&laquo; '+this._options.localization.buttonTexts.prevButton+'</button> <button class="btn btn-sm btn-outline-secondary" data-role="next">'+this._options.localization.buttonTexts.nextButton+' &raquo;</button> <button class="btn btn-sm btn-outline-secondary" data-role="pause-resume" data-pause-text="'+this._options.localization.buttonTexts.pauseButton+'" data-resume-text="'+this._options.localization.buttonTexts.resumeButton+'">'+this._options.localization.buttonTexts.pauseButton+'</button> </div> <button class="btn btn-sm btn-outline-secondary" data-role="end">'+this._options.localization.buttonTexts.endTourButton+"</button> </div> </div>"},null===this._options.template?null!=a[this._options.framework]&&null!=a[this._options.framework]?(this._options.template=a[this._options.framework],this._debug("Using framework template: "+this._options.framework)):this._debug("Warning: "+this._options.framework+" specified for template (no template option set), but framework is unknown. Tour will not work!"):this._debug("Using custom template"),"function"==typeof this._options.sanitizeFunction)this._debug("Using custom sanitize function in place of bootstrap - security implications, be careful");else{this._options.sanitizeFunction=null,this._debug("Extending Bootstrap sanitize options");var n=[];"bootstrap4"==this._options.framework&&void 0!==t.fn.popover.Constructor.Default.whiteList&&(n=t.fn.popover.Constructor.Default.whiteList),"bootstrap3"==this._options.framework&&void 0!==t.fn.popover.Constructor.DEFAULTS.whiteList&&(n=t.fn.popover.Constructor.DEFAULTS.whiteList);var i=t.extend(!0,{},n);t.each({button:["data-role","style"],img:["style"],div:["style"]},(function(e,o){null==i[e]&&(i[e]=[]),t.merge(i[e],o)})),t.each(this._options.sanitizeWhitelist,(function(e,o){null==i[e]&&(i[e]=[]),t.merge(i[e],o)})),this._options.sanitizeWhitelist=i}return this._current=null,this.backdrops=[],this}return p.prototype.addSteps=function(t){var e,o,n;for(e=0,o=t.length;e<o;e++)n=t[e],this.addStep(n);return this},p.prototype.addStep=function(t){return this._options.steps.push(t),this},p.prototype.getStepCount=function(){return this._options.steps.length},p.prototype.getStep=function(e){if(null!=this._options.steps[e])return"function"==typeof this._options.steps[e].element&&(this._options.steps[e].element=this._options.steps[e].element()),this._options.steps[e]=t.extend(!0,{id:"step-"+e,path:"",host:"",placement:"right",positioning:{adjustRelative:null},title:"",content:"<p></p>",next:e===this._options.steps.length-1?-1:e+1,prev:e-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,redirect:this._options.redirect,preventInteraction:!1,orphan:this._options.orphan,showIfUnintendedOrphan:this._options.showIfUnintendedOrphan,duration:this._options.duration,delay:this._options.delay,delayOnElement:null,template:this._options.template,showProgressBar:this._options.showProgressBar,showProgressText:this._options.showProgressText,getProgressBarHTML:this._options.getProgressBarHTML,getProgressTextHTML:this._options.getProgressTextHTML,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume,onRedirectError:this._options.onRedirectError,onElementUnavailable:this._options.onElementUnavailable,onModalHidden:this._options.onModalHidden,internalFlags:{elementModal:null,elementModalOriginal:null,elementBootstrapSelectpicker:null}},this._options.steps[e]),this._options.steps[e].backdropOptions=t.extend(!0,{},this._options.backdropOptions,this._options.steps[e].backdropOptions),this._options.steps[e]},p.prototype._setStepFlag=function(t,e,o){null!=this._options.steps[t]&&(this._options.steps[t].internalFlags[e]=o)},p.prototype._getStepFlag=function(t,e){if(null!=this._options.steps[t])return this._options.steps[t].internalFlags[e]},p.prototype.init=function(){console.log("You should remove Tour.init() from your code. It's not required with Bootstrap Tourist")},p.prototype.start=function(){if(this.ended())return null!=this._options.onPreviouslyEnded&&"function"==typeof this._options.onPreviouslyEnded?(this._debug("Tour previously ended, exiting. Call tour.restart() to force restart. Firing onPreviouslyEnded()"),this._options.onPreviouslyEnded(this)):this._debug("Tour previously ended, exiting. Call tour.restart() to force restart"),this;this.setCurrentStep(),this._createOverlayElements(),this._initMouseNavigation(),this._initKeyboardNavigation();var e=this;t(window).on("resize.tour-"+e._options.name,(function(){e.reshowCurrentStep()}));var o=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0);return this._callOnPromiseDone(o,this.showStep,this._current),this},p.prototype.next=function(){var t;return t=this.hideStep(),this._callOnPromiseDone(t,this._showNextStep)},p.prototype.prev=function(){var t;return t=this.hideStep(),this._callOnPromiseDone(t,this._showPrevStep)},p.prototype.goTo=function(t){var e;return this._debug("goTo step "+t),e=this.hideStep(),this._callOnPromiseDone(e,this.showStep,t)},p.prototype.end=function(){var e,o,n;return this._debug("Tour.end() called"),n=this,e=function(e){if(t(s).off("click.tour-"+n._options.name),t(s).off("keyup.tour-"+n._options.name),t(window).off("resize.tour-"+n._options.name),t(window).off("scroll.tour-"+n._options.name),n._setState("end","yes"),n._clearTimer(),t(".tour-step-element-reflex").removeClass("tour-step-element-reflex"),n._hideBackdrop(),n._destroyOverlayElements(),null!=n._options.onEnd)return n._options.onEnd(n)},o=this.hideStep(),this._callOnPromiseDone(o,e)},p.prototype.ended=function(){return"yes"==this._getState("end")},p.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this._removeState("redirect_to"),this.start()},p.prototype.pause=function(){var t;return(t=this.getStep(this._current))&&t.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,window.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=t.onPause?t.onPause(this,this._duration):void 0):this},p.prototype.resume=function(){var t,e;return(t=this.getStep(this._current))&&t.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||t.duration,this._timer=window.setTimeout((e=this,function(){return e._isLast()?e.end():e.next()}),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=t.onResume&&this._duration!==t.duration?t.onResume(this,this._duration):void 0):this},p.prototype.reshowCurrentStep=function(){var t;return this._debug("Reshowing current step "+this.getCurrentStepIndex()),t=this.hideStep(),this._callOnPromiseDone(t,this.showStep,this._current)},p.prototype.hideStep=function(){var e,o,n,i,r;if(i=this.getStep(this.getCurrentStepIndex()))return this._clearTimer(),n=this._makePromise(null!=i.onHide?i.onHide(this,this.getCurrentStepIndex()):void 0),r=this,o=function(e){var o;(o=t(i.element)).data("bs.popover")||o.data("popover")||(o=t("body")),"bootstrap3"==r._options.framework&&o.popover("destroy"),"bootstrap4"==r._options.framework&&o.popover("dispose"),o.removeClass("tour-"+r._options.name+"-element tour-"+r._options.name+"-"+r.getCurrentStepIndex()+"-element").removeData("bs.popover"),i.reflex&&o.removeClass("tour-step-element-reflex").off(r._reflexEvent(i.reflex)+".tour-"+r._options.name),r._unfixBootstrapSelectPickerZindex(i);var n=r._getStepFlag(r.getCurrentStepIndex(),"elementModalOriginal");if(null!=n&&(r._setStepFlag(r.getCurrentStepIndex(),"elementModalOriginal",null),i.element=n),null!=i.onHidden)return i.onHidden(r)},e=i.delay.hide||i.delay,"[object Number]"==={}.toString.call(e)&&e>0?(this._debug("Wait "+e+" milliseconds to hide the step "+(this._current+1)),window.setTimeout(function(t){return function(){return t._callOnPromiseDone(n,o)}}(this),e)):this._callOnPromiseDone(n,o),n},p.prototype.showStep=function(e){var o,n,i,r,a,l,p;if(this.ended())return this._debug("Tour ended, showStep prevented."),null!=this._options.onEnd&&this._options.onEnd(this),this;if((l=this.getStep(e))&&(a=e<this._current,n=this._makePromise(null!=l.onShow?l.onShow(this,e):void 0),this.setCurrentStep(e),o=function(){switch({}.toString.call(l.path)){case"[object Function]":return l.path();case"[object String]":return this._options.basePath+l.path;default:return l.path}}.call(this),!l.redirect||!this._isRedirect(l.host,o,s.location)||(this._redirect(l,e,o),this._isJustPathHashDifferent(l.host,o,s.location)))){var h=null;if(!1===l.orphan&&(t(l.element).hasClass("modal")||t(l.element).data("bs.modal"))&&(h=t(l.element),this._setStepFlag(this.getCurrentStepIndex(),"elementModalOriginal",l.element),l.element=t(l.element).find(".modal-content:first")),p=t(l.element),null===h&&p.parents(".modal:first").length&&(h=p.parents(".modal:first")),h&&h.length>0){this._debug("Modal identified, onModalHidden callback available"),this._setStepFlag(e,"elementModal",h);var u=function(t,o){return function(){if(t._debug("Modal close triggered"),"function"==typeof l.onModalHidden){var n=l.onModalHidden(t,e);if(!1===n)return void t._debug("onModalHidden returned exactly false, tour step unchanged");if(Number.isInteger(n))return t._debug("onModalHidden returned int, tour moving to step "+n+1),o.off("hidden.bs.modal",u),t.goTo(n);t._debug("onModalHidden did not return false or int, continuing tour")}return o.off("hidden.bs.modal",u),t._isLast()?(t._debug("Modal close reached end of tour"),t.end()):(t._debug("Modal close: next step called"),t.next())}}(this,h);h.off("hidden.bs.modal",u).on("hidden.bs.modal",u)}if(r=function(t){return function(o){if(t._isOrphan(l)){if(!1===l.orphan&&!1===l.showIfUnintendedOrphan)return t._debug("Skip the orphan step "+(t._current+1)+".\nOrphan option is false and the element "+l.element+" does not exist or is hidden."),"function"==typeof l.onElementUnavailable&&(t._debug("Calling onElementUnavailable callback"),l.onElementUnavailable(t,t._current)),void(a?t._showPrevStep(!0):t._showNextStep(!0));!1===l.orphan&&!0===l.showIfUnintendedOrphan?t._debug("Show the unintended orphan step "+(t._current+1)+". showIfUnintendedOrphan option is true."):t._debug("Show the orphan step "+(t._current+1)+". Orphans option is true.")}if(l.autoscroll&&!t._isOrphan(l)?t._scrollIntoView(e):t._showPopoverAndOverlay(e),l.duration)return t.resume()}}(this),i=l.delay.show||l.delay,"[object Number]"==={}.toString.call(i)&&i>0)this._debug("Wait "+i+" milliseconds to show the step "+(this._current+1)),window.setTimeout(function(t){return function(){return t._callOnPromiseDone(n,r)}}(this),i);else if(l.delayOnElement){var d=null,c=null,f=this,g=function(){return"function"==typeof l.delayOnElement.delayElement?l.delayOnElement.delayElement():"element"==l.delayOnElement.delayElement?t(l.element):t(l.delayOnElement.delayElement)},_=(d=g()).length>0?d[0].tagName:l.delayOnElement.delayElement,m=l.delayOnElement.maxDelay?l.delayOnElement.maxDelay:2e3;this._debug("Wait for element "+_+" visible or max "+m+" milliseconds to show the step "+(this._current+1)),c=window.setInterval((function(){if(f._debug("Wait for element "+_+": checking..."),0===d.length&&(d=g()),d.is(":visible"))return f._debug("Wait for element "+_+": found, showing step"),window.clearInterval(c),c=null,f._callOnPromiseDone(n,r)}),250),m<250&&(m=251),window.setTimeout((function(){if(c)return f._debug("Wait for element "+_+": max timeout reached without element found"),window.clearInterval(c),f._callOnPromiseDone(n,r)}),m)}else this._callOnPromiseDone(n,r);return n}},p.prototype.getCurrentStepIndex=function(){return this._current},p.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this._setState("current_step",t)):(this._current=this._getState("current_step"),this._current=null===this._current?0:parseInt(this._current,10)),this},p.prototype._setState=function(t,e){var o;if(this._options.storage){o=this._options.name+"_"+t;try{this._options.storage.setItem(o,e)}catch(t){t.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(o,e)}return null==this._state&&(this._state={}),this._state[t]=e},p.prototype._removeState=function(t){var e;return this._options.storage?(e=this._options.name+"_"+t,this._options.storage.removeItem(e),this._options.afterRemoveState(e)):null!=this._state?delete this._state[t]:void 0},p.prototype._getState=function(t){var e,o;return this._options.storage?(e=this._options.name+"_"+t,o=this._options.storage.getItem(e)):null!=this._state&&(o=this._state[t]),void 0!==o&&"null"!==o||(o=null),this._options.afterGetState(t,o),o},p.prototype._showNextStep=function(t){var e,o,n,i;t=t||!1;if(i=this,o=function(t){return i.showStep(i._current+1)},e=void 0,n=this.getStep(this._current),!1===t&&null!=n.onNext){var r=n.onNext(this);if(!1===r)return this._debug("onNext callback returned false, preventing move to next step"),this.showStep(this._current);e=this._makePromise(r)}return this._callOnPromiseDone(e,o)},p.prototype._showPrevStep=function(t){var e,o,n,i;t=t||!1;if(i=this,o=function(t){return i.showStep(n.prev)},e=void 0,n=this.getStep(this._current),!1===t&&null!=n.onPrev){var r=n.onPrev(this);if(!1===r)return this._debug("onPrev callback returned false, preventing move to previous step"),this.showStep(this._current);e=this._makePromise(r)}return this._callOnPromiseDone(e,o)},p.prototype._debug=function(t){if(this._options.debug)return window.console.log("[ Bootstrap Tourist: '"+this._options.name+"' ] "+t)},p.prototype._isRedirect=function(t,e,o){var n;return!(null==t||""===t||!("[object RegExp]"==={}.toString.call(t)&&!t.test(o.origin)||"[object String]"==={}.toString.call(t)&&this._isHostDifferent(t,o)))||(n=[o.pathname,o.search,o.hash].join(""),null!=e&&""!==e&&("[object RegExp]"==={}.toString.call(e)&&!e.test(n)||"[object String]"==={}.toString.call(e)&&this._isPathDifferent(e,n)))},p.prototype._isHostDifferent=function(t,e){switch({}.toString.call(t)){case"[object RegExp]":return!t.test(e.origin);case"[object String]":return this._getProtocol(t)!==this._getProtocol(e.href)||this._getHost(t)!==this._getHost(e.href);default:return!0}},p.prototype._isPathDifferent=function(t,e){return this._getPath(t)!==this._getPath(e)||!this._equal(this._getQuery(t),this._getQuery(e))||!this._equal(this._getHash(t),this._getHash(e))},p.prototype._isJustPathHashDifferent=function(t,e,o){var n;return(null==t||""===t||!this._isHostDifferent(t,o))&&(n=[o.pathname,o.search,o.hash].join(""),"[object String]"==={}.toString.call(e)&&(this._getPath(e)===this._getPath(n)&&this._equal(this._getQuery(e),this._getQuery(n))&&!this._equal(this._getHash(e),this._getHash(n))))},p.prototype._redirect=function(e,o,n){var i;return t.isFunction(e.redirect)?e.redirect.call(this,n):(i="[object String]"==={}.toString.call(e.host)?""+e.host+n:n,this._debug("Redirect to "+i),this._getState("redirect_to")!==""+o?(this._setState("redirect_to",""+o),s.location.href=i):(this._debug("Error redirection loop to "+n),this._removeState("redirect_to"),null!=e.onRedirectError?e.onRedirectError(this):void 0))},p.prototype._isOrphan=function(e){return 1==e.orphan||null==e.element||!t(e.element).length||t(e.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==t(e.element)[0].namespaceURI},p.prototype._isLast=function(){return this._current>=this._options.steps.length-1},p.prototype._showPopoverAndOverlay=function(t){var e;if(this.getCurrentStepIndex()===t&&!this.ended())return e=this.getStep(t),this._updateBackdropElements(e),this._updateOverlayElements(e),this._fixBootstrapSelectPickerZindex(e),this._showPopover(e,t),null!=e.onShown&&e.onShown(this),this},p.prototype._showPopover=function(e,o){var n,i,r,a,l,p,h;if(r=this._isOrphan(e),0==t(s).find(".popover.tour-"+this._options.name+".tour-"+this._options.name+"-"+this.getCurrentStepIndex()).length){if(t(".tour-"+this._options.name).remove(),e.template=this._template(e,o),r&&(e.element="body",e.placement="top",e.reflexOnly&&this._debug("Step is an orphan, and reflexOnly is set: ignoring reflexOnly")),(n=t(e.element)).addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+o+"-element"),e.reflex&&!r&&(n.addClass("tour-step-element-reflex"),n.off(this._reflexEvent(e.reflex)+".tour-"+this._options.name).on(this._reflexEvent(e.reflex)+".tour-"+this._options.name,(h=this,function(){return h._isLast()?h.end():h.next()})),e.reflexOnly)){var u=t(e.template).find('[data-role="next"]').clone();if(u.length){var d=u[0].outerHTML;u.hide();var c=u[0].outerHTML;e.template=e.template.replace(d,c)}}a=e.title,l=e.content,p=parseInt((o+1)/this.getStepCount()*100),e.showProgressBar&&(l="function"==typeof e.getProgressBarHTML?e.getProgressBarHTML(p)+l:'<div class="progress"><div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+p+'%;"></div></div>'+l),e.showProgressText&&("function"==typeof e.getProgressTextHTML?a+=e.getProgressTextHTML(o,p,this.getStepCount()):("bootstrap3"==this._options.framework&&(a+='<span class="pull-right">'+(o+1)+"/"+this.getStepCount()+"</span>"),"bootstrap4"==this._options.framework&&(a+='<span class="float-right">'+(o+1)+"/"+this.getStepCount()+"</span>")));var f={placement:e.placement,trigger:"manual",title:a,content:l,html:!0,whiteList:this._options.sanitizeWhitelist,sanitizeFn:this._options.sanitizeFunction,animation:e.animation,container:e.container,template:e.template,selector:e.element};"bootstrap4"==this._options.framework&&(r?f.offset=function(e){var o=Math.max(0,(t(window).height()-e.popper.height)/2),n=Math.max(0,(t(window).width()-e.popper.width)/2);return e.popper.position="fixed",e.popper.top=o,e.popper.bottom=o+e.popper.height,e.popper.left=n,e.popper.right=o+e.popper.width,e}:(f.selector="#"+e.element[0].id,null!==e.positioning.adjustRelative&&e.positioning.adjustRelative.length>0&&("function"==typeof e.positioning.adjustRelative?f.offset=e.positioning.adjustRelative():f.offset=e.positioning.adjustRelative))),n.popover(f),n.popover("show"),"bootstrap3"==this._options.framework&&(i=n.data("bs.popover")?n.data("bs.popover").tip():n.data("popover").tip(),"fixed"===n.css("position")&&i.css("position","fixed"),r?(this._center(i),i.css("position","fixed")):this._reposition(i,e)),"bootstrap4"==this._options.framework&&(i=t(n.data("bs.popover")?n.data("bs.popover").getTipElement():n.data("popover").getTipElement())),i.attr("id",e.id),this._debug("Step "+(this._current+1)+" of "+this._options.steps.length)}},p.prototype._template=function(e,o){var n,i,r,s,a,l;return l=e.template,this._isOrphan(e)&&"[object Boolean]"!=={}.toString.call(e.orphan)&&(l=e.orphan),r=(n=(a=t.isFunction(l)?t(l(o,e)):t(l)).find(".popover-navigation")).find('[data-role="prev"]'),i=n.find('[data-role="next"]'),s=n.find('[data-role="pause-resume"]'),this._isOrphan(e)&&a.addClass("orphan"),a.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+o),e.reflex&&a.addClass("tour-"+this._options.name+"-reflex"),e.prev<0&&r.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),e.next<0&&i.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),e.duration||s.remove(),a.clone().wrap("<div>").parent().html()},p.prototype._reflexEvent=function(t){return"[object Boolean]"==={}.toString.call(t)?"click":t},p.prototype._reposition=function(e,o){var n,i,r,a,l,p,h;if(a=e[0].offsetWidth,i=e[0].offsetHeight,l=(h=e.offset()).left,p=h.top,(n=t(s).height()-h.top-e.outerHeight())<0&&(h.top=h.top+n),(r=t("html").outerWidth()-h.left-e.outerWidth())<0&&(h.left=h.left+r),h.top<0&&(h.top=0),h.left<0&&(h.left=0),e.offset(h),"bottom"===o.placement||"top"===o.placement){if(l!==h.left)return this._replaceArrow(e,2*(h.left-l),a,"left")}else if(p!==h.top)return this._replaceArrow(e,2*(h.top-p),i,"top")},p.prototype._center=function(e){return e.css("top",t(window).outerHeight()/2-e.outerHeight()/2),e.css("left",t(window).outerWidth()/2-e.outerWidth()/2)},p.prototype._replaceArrow=function(t,e,o,n){return t.find(".arrow").css(n,e?50*(1-e/o)+"%":"")},p.prototype._scrollIntoView=function(e){var o,n,i,r,s,a,l,p,h;if(l=this.getStep(e),o=t(l.element),this._isOrphan(l))return this._showPopoverAndOverlay(e);if(!o.length)return this._showPopoverAndOverlay(e);switch(n=t(window),s=o.offset().top,r=o.outerHeight(),p=n.height(),a=0,l.placement){case"top":a=Math.max(0,s-p/2);break;case"left":case"right":a=Math.max(0,s+r/2-p/2);break;case"bottom":a=Math.max(0,s+r-p/2)}return this._debug("Scroll into view. ScrollTop: "+a+". Element offset: "+s+". Window height: "+p+"."),i=0,t("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(a)},(h=this,function(){if(2==++i)return h._showPopoverAndOverlay(e),h._debug("Scroll into view.\nAnimation end element offset: "+o.offset().top+".\nWindow height: "+n.height()+".")}))},p.prototype._initMouseNavigation=function(){var e;return e=this,t(s).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(t){return function(e){return e.preventDefault(),t.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(t){return function(e){if(e.preventDefault(),t._current>0)return t.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(t){return function(e){return e.preventDefault(),t.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",(function(o){var n;return o.preventDefault(),(n=t(this)).text(e._paused?n.data("pause-text"):n.data("resume-text")),e._paused?e.resume():e.pause()}))},p.prototype._initKeyboardNavigation=function(){var e;if(this._options.keyboard)return t(s).on("keyup.tour-"+this._options.name,(e=this,function(t){if(t.which)switch(t.which){case 39:return t.preventDefault(),e._isLast()?e.end():e.next();case 37:if(t.preventDefault(),e._current>0)return e.prev();break;case 27:return t.preventDefault(),e.end()}}))},p.prototype._makePromise=function(e){return e&&t.isFunction(e.then)?e:null},p.prototype._callOnPromiseDone=function(t,e,o){return t?t.then((n=this,function(t){return e.call(n,o)})):e.call(this,o);var n},p.prototype._fixBootstrapSelectPickerZindex=function(e){var o;this._isOrphan(e)||0==t(s).find(".popover.tour-"+this._options.name+".tour-"+this._options.name+"-"+this.getCurrentStepIndex()).length&&(o="select"==t(e.element)[0].tagName.toLowerCase()?t(e.element):t(e.element).find("select:first")).length>0&&o.parent().hasClass("bootstrap-select")&&(this._debug("Fixing Bootstrap SelectPicker"),o.parent().css("z-index","1111"),this._setStepFlag(this.getCurrentStepIndex(),"elementBootstrapSelectpicker",o))},p.prototype._unfixBootstrapSelectPickerZindex=function(t){var e=this._getStepFlag(this.getCurrentStepIndex(),"elementBootstrapSelectpicker");e&&(this._debug("Unfixing Bootstrap SelectPicker"),e.parent().css("z-index","auto"))},p.prototype._createOverlayElements=function(){var o=t('<div class="tour-backdrop" id="'+e.substr(1)+'"></div>'),i=t('<div class="tour-highlight" id="'+n.substr(1)+'" style="width:0px;height:0px;top:0px;left:0px;"></div>');0===t(e).length&&t(this._options.backdropContainer).append(o),0===t(n).length&&t(this._options.backdropContainer).append(i)},p.prototype._destroyOverlayElements=function(o){t(e).remove(),t(n).remove(),t(r).remove(),t(".tour-highlight-element").removeClass("tour-highlight-element")},p.prototype._hideBackdrop=function(r){(r=r||null)?(this._hideHighlightOverlay(r),"function"==typeof r.backdropOptions.animation.backdropHide?r.backdropOptions.animation.backdropHide(t(e)):(t(e).addClass(r.backdropOptions.animation.backdropHide),t(e).hide(0,(function(){t(this).removeClass(r.backdropOptions.animation.backdropHide)})))):(t(e).hide(0),t(n).hide(0),t(o).remove(),t(i).remove())},p.prototype._showBackdrop=function(o){o=o||null;t(e).removeClass().addClass("tour-backdrop").hide(0),o?("function"==typeof o.backdropOptions.animation.backdropShow?o.backdropOptions.animation.backdropShow(t(e)):(t(e).addClass(o.backdropOptions.animation.backdropShow),t(e).show(0,(function(){t(this).removeClass(o.backdropOptions.animation.backdropShow)}))),this._isOrphan(o)?t(n).is(":visible")&&this._hideHighlightOverlay(o):t(n).is(":visible")?this._positionHighlightOverlay(o):this._showHighlightOverlay(o)):(t(e).show(0),t(n).show(0))},p.prototype._createStepSubset=function(e){var o=this,i=t(e.element);return{element:i,container:e.container,autoscroll:e.autoscroll,backdrop:e.backdrop,preventInteraction:e.preventInteraction,isOrphan:this._isOrphan(e),orphan:e.orphan,showIfUnintendedOrphan:e.showIfUnintendedOrphan,duration:e.duration,delay:e.delay,fnPositionHighlight:function(){o._debug("Positioning highlight (fnPositionHighlight) over step element "+i[0].id+":\nWidth = "+i.outerWidth()+", height = "+i.outerHeight()+"\nTop: "+i.offset().top+", left: "+i.offset().left),t(n).width(i.outerWidth()).height(i.outerHeight()).offset(i.offset())}}},p.prototype._showHighlightOverlay=function(e){var o=t(".tour-highlight-element");o.length>0&&o.removeClass("tour-highlight-element");var i=t(e.element).parents(".modal:first");i.length?i.addClass("tour-highlight-element"):t(e.element).addClass("tour-highlight-element"),t(n).removeClass().addClass("tour-highlight").hide(0),"function"==typeof e.backdropOptions.animation.highlightShow?e.backdropOptions.animation.highlightShow(t(n),this._createStepSubset(e)):(t(n).css({opacity:e.backdropOptions.highlightOpacity,"background-color":e.backdropOptions.highlightColor}),t(n).width(0).height(0).offset({top:0,left:0}),t(n).show(0),t(n).addClass(e.backdropOptions.animation.highlightShow),t(n).width(t(e.element).outerWidth()).height(t(e.element).outerHeight()).offset(t(e.element).offset()),t(n).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",(function(){t(n).removeClass(e.backdropOptions.animation.highlightShow)})))},p.prototype._positionHighlightOverlay=function(e){var o=t(".tour-highlight-element");o.length>0&&o.removeClass("tour-highlight-element");var i=t(e.element).parents(".modal:first");i.length?i.addClass("tour-highlight-element"):t(e.element).addClass("tour-highlight-element"),"function"==typeof e.backdropOptions.animation.highlightTransition?e.backdropOptions.animation.highlightTransition(t(n),this._createStepSubset(e)):(t(n).removeClass().addClass("tour-highlight"),t(n).css({opacity:e.backdropOptions.highlightOpacity,"background-color":e.backdropOptions.highlightColor}),t(n).addClass(e.backdropOptions.animation.highlightTransition),t(n).width(t(e.element).outerWidth()).height(t(e.element).outerHeight()).offset(t(e.element).offset()),t(n).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",(function(){t(n).removeClass(e.backdropOptions.animation.highlightTransition)})))},p.prototype._hideHighlightOverlay=function(e){t(".tour-highlight-element").removeClass("tour-highlight-element"),"function"==typeof e.backdropOptions.animation.highlightHide?e.backdropOptions.animation.highlightHide(t(n),this._createStepSubset(e)):(t(n).addClass(e.backdropOptions.animation.highlightHide),t(n).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",(function(){t(n).removeClass().addClass("tour-highlight"),t(n).hide(0)})))},p.prototype._updateBackdropElements=function(r){r.backdrop!=t(e).is(":visible")?r.backdrop?this._showBackdrop(r):this._hideBackdrop(r):r.backdrop?this._isOrphan(r)?t(n).is(":visible")&&this._hideHighlightOverlay(r):t(n).is(":visible")?this._positionHighlightOverlay(r):this._showHighlightOverlay(r):t(n).is(":visible")&&this._hideHighlightOverlay(r),t(o).remove(),t(i).remove(),1==r.backdropOptions.backdropSibling?(t(n).addClass("tour-behind"),t(e).addClass("tour-zindexFix"),t(n).clone().prop("id",i.substring(1)).removeClass("tour-behind").insertAfter(".tour-highlight-element"),t(e).clone().prop("id",o.substring(1)).removeClass("tour-zindexFix").insertAfter(".tour-highlight-element")):(t(n).removeClass("tour-behind"),t(e).removeClass("tour-zindexFix"))},p.prototype._updateOverlayElements=function(e){e.preventInteraction?(this._debug("preventInteraction == true, adding overlay"),0===t(r).length&&t('<div class="tour-prevent" id="'+r.substr(1)+'" style="width:0px;height:0px;top:0px;left:0px;"></div>').insertAfter(n),t(r).width(t(e.element).outerWidth()).height(t(e.element).outerHeight()).offset(t(e.element).offset())):t(r).remove()},p.prototype._clearTimer=function(){return window.clearTimeout(this._timer),this._timer=null,this._duration=null},p.prototype._getProtocol=function(t){return(t=t.split("://")).length>1?t[0]:"http"},p.prototype._getHost=function(t){return(t=(t=t.split("//")).length>1?t[1]:t[0]).split("/")[0]},p.prototype._getPath=function(t){return t.replace(/\/?$/,"").split("?")[0].split("#")[0]},p.prototype._getQuery=function(t){return this._getParams(t,"?")},p.prototype._getHash=function(t){return this._getParams(t,"#")},p.prototype._getParams=function(t,e){var o,n,i,r,s;if(1===(r=t.split(e)).length)return{};for(s={},o=0,n=(r=r[1].split("&")).length;o<n;o++)s[(i=(i=r[o]).split("="))[0]]=i[1]||"";return s},p.prototype._equal=function(t,e){var o,n,i,r,s,a;if("[object Object]"==={}.toString.call(t)&&"[object Object]"==={}.toString.call(e)){if(r=Object.keys(t),s=Object.keys(e),r.length!==s.length)return!1;for(n in t)if(a=t[n],!this._equal(e[n],a))return!1;return!0}if("[object Array]"==={}.toString.call(t)&&"[object Array]"==={}.toString.call(e)){if(t.length!==e.length)return!1;for(n=o=0,i=t.length;o<i;n=++o)if(a=t[n],!this._equal(a,e[n]))return!1;return!0}return t===e},p}()}));